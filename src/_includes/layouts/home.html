<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{title}} | JDM 101</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/css/global.css">
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css">
</head>
<body>
    {% include "menu.html" %}
    {{ content | safe }}
    <script>
        if (window.netlifyIdentity) {
          window.netlifyIdentity.on('init', user => {
            if (!user) {
              window.netlifyIdentity.on('login', () => {
                document.location.href = '/admin/';
              });
            }
          });
        }
      </script>
      <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>
      <script>
        document.addEventListener( 'DOMContentLoaded', function() {
          let splide = new Splide( '.splide', {
          type: 'loop',
          perPage: 1,
          speed: number = 4000,
          drag: true,
          snap: true,
          flickPower: 300,
          dragMinThreshold: 10,
          autoplay: true,
          interval: 4000,
          direction: 'ttb',
          height: '100vh',
          });
          splide.mount();
          let bar = splide.root.querySelector( '.my-slider-progress-bar' );
  
          // Updates the bar width whenever the carousel moves:
          splide.on( 'mounted move', function () {
            let end  = splide.Components.Controller.getEnd() + 1;
            let rate = Math.min( ( splide.index + 1 ) / end, 1 );
            bar.style.width = String( 100 * rate ) + '%';
          } );
        } );

        setTimeout(() => {
            document.querySelectorAll('.splide__arrow')[0].style.display = 'none';
            document.querySelectorAll('.splide__arrow')[1].style.display = 'none';
            document.querySelector('.splide__pagination').style.display = 'none';
          },1000);
      </script>
</body>
</html>